diff --color -U 5 -r -Z -B ./org/gtk/gtkmenubutton.c ./mod/gtk/gtkmenubutton.c
--- ./org/gtk/gtkmenubutton.c	2017-10-26 06:32:02.000000000 +0200
+++ ./mod/gtk/gtkmenubutton.c	2017-10-30 22:00:30.863771554 +0100
@@ -821,11 +821,11 @@
   if (menu_model)
     g_object_ref (menu_model);
 
   if (menu_model)
     {
-      if (priv->use_popover)
+      if (g_getenv ("GTK_CSD") != FALSE && priv->use_popover)
         {
           GtkWidget *popover;
 
           popover = gtk_popover_new_from_model (GTK_WIDGET (menu_button), menu_model);
           gtk_menu_button_set_popover (menu_button, popover);
